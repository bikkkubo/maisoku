# サンプルPDFファイル配置ガイド

このディレクトリは、mysoku-renamerの動作確認・テスト用のサンプルPDFファイルを配置するためのディレクトリです。

## 📁 ディレクトリ構成

```
samples/
├── README.md           # このファイル（配置指針）
├── test_data/          # テスト用データ（推奨）
│   ├── sell/          # 売買物件サンプル
│   ├── rent/          # 賃貸物件サンプル
│   └── unknown/       # その他・不明サンプル
└── production_backup/ # 本番データのバックアップ（注意）
```

## ⚠️ 重要: 個人情報・機密情報の取り扱い

### 🚫 配置してはいけないファイル
- **個人情報を含むマイソクPDF**
  - 顧客名、連絡先、個人の資産情報等
- **社外秘・機密情報を含むファイル**
  - 未公開物件情報、内部価格情報、営業戦略資料等
- **第三者の権利を侵害するファイル**
  - 著作権・商標権を侵害する画像・テキスト
- **本番環境の実ファイル**
  - バックアップ時も個人情報除去を徹底

### ✅ 配置可能なファイル例
- **匿名化済みテスト用PDF**
  - 物件名・価格のみで個人情報を除去したもの
- **架空の物件情報PDF**
  - 完全に架空の物件名・価格で作成したもの  
- **公開情報ベースのサンプル**
  - 不動産ポータルサイト等の公開情報を参考にした架空データ

## 📝 サンプル作成指針

### 1. テスト網羅性
以下のパターンを含むサンプルを準備してください：

**物件種別:**
- 売買物件（1億円以上・未満の両方）
- 賃貸物件（家賃・管理費別記載）
- 種別不明物件

**価格表記バリエーション:**
- `1億2,300万円`、`1.2億円`
- `8,500万円`、`85,000,000円`
- `家賃18万円`、`賃料180,000円`

**物件名パターン:**
- 正式な物件名（マンション・アパート名）
- ノイズ語付き（`号室`、`階`、`(価格改定)`等）
- 物件名欄なし・判別困難なもの

### 2. ファイル命名規則（配置時）
```
samples/test_data/
├── sell_sample_1.2oku.pdf      # 売買1.2億円
├── sell_sample_8500man.pdf     # 売買8,500万円  
├── rent_sample_18man.pdf       # 賃貸18万円
├── unknown_sample_noinfo.pdf   # 情報不明
└── error_sample_broken.pdf     # エラーテスト用
```

### 3. 品質基準
- **テキスト埋め込み**: OCR不要なテキストレイヤー付きPDF
- **日本語対応**: UTF-8エンコーディング
- **適切な文書構造**: 物件名・価格が明確に識別可能
- **ファイルサイズ**: 1MB以下（テスト効率化のため）

## 🔧 サンプル生成ツール

### 自動生成（推奨）
```bash
# プロジェクトルートで実行
python scripts/gen_sample_pdfs.py

# 生成先: tests/acceptance/samples/
# - sell_sample.pdf
# - rent_sample.pdf  
# - unknown_sample.pdf
```

### 手動作成時の注意点
1. **reportlab等を使用してプログラム生成**（再現性確保）
2. **完全な架空データ使用**（実在の物件・人物名は使用禁止）
3. **テスト目的明示**（ファイル内にテスト用であることを記載）

## 🛡️ セキュリティ・プライバシー対策

### リポジトリ管理
- **`.gitignore`設定**: 個人情報含む可能性のあるファイル除外
- **定期的な見直し**: サンプルファイルの内容定期チェック
- **アクセス制御**: 必要最小限のメンバーのみアクセス許可

### ファイル管理
- **暗号化**: 機密性の高いテスト用ファイルは暗号化保存
- **定期削除**: 不要になったサンプルファイルの定期的削除
- **監査ログ**: ファイル追加・削除の記録保持

### 開発者の責任
- **確認義務**: 新規ファイル追加時の内容確認
- **報告義務**: 個人情報漏洩リスク発見時の即座報告
- **削除義務**: 個人情報含有ファイルの即座削除

## 🔍 使用例・テストケース

### 基本動作確認
```bash
# ドライランテスト
mysoku-rename --dry-run samples/test_data --max-files 5 --debug

# 期待される出力パターン確認
head -5 mysoku_preview.tsv
```

### エッジケース検証
```bash
# エラーハンドリング確認
mysoku-rename --dry-run samples/test_data/error_sample_broken.pdf --debug

# 種別不明ファイル処理確認  
mysoku-rename --dry-run samples/test_data/unknown_sample.pdf --debug
```

## 📋 チェックリスト（ファイル追加時）

- [ ] **個人情報チェック**: 氏名・連絡先・個人資産情報が含まれていない
- [ ] **機密情報チェック**: 社外秘・未公開情報が含まれていない  
- [ ] **著作権チェック**: 第三者の権利を侵害していない
- [ ] **テスト目的明確化**: ファイル内容・目的が明確
- [ ] **命名規則遵守**: ファイル名が規則に従っている
- [ ] **品質確認**: PDF形式・テキスト埋め込みが正常
- [ ] **サイズ確認**: 不必要に大きなファイルサイズでない
- [ ] **文書化**: 追加理由・内容をコミットメッセージに記録

## 🆘 問題発生時の対処

### 個人情報漏洩の疑いがある場合
1. **即座停止**: 該当ファイルの使用・配布を即座停止
2. **関係者通知**: プロジェクト管理者・セキュリティ担当者に報告
3. **ファイル削除**: リポジトリ・ローカル環境からの完全削除
4. **影響調査**: 配布範囲・アクセス履歴の調査
5. **再発防止**: チェックリスト・プロセスの見直し

### 技術的問題の場合
1. **ファイル検証**: PDFとして正常に読み込み可能か確認
2. **ツール実行**: `mysoku-rename --debug`での詳細ログ確認
3. **フォーマット確認**: テキスト埋め込み・エンコーディング確認
4. **Issue報告**: GitHub Issues でバグ報告・改善提案

## 📞 連絡先・サポート

- **技術的質問**: GitHub Issues
- **セキュリティ問題**: [セキュリティ担当者メール]
- **プライバシー問題**: [プライバシー担当者メール]

---

**最終更新**: 2024年1月
**確認者**: [プロジェクト管理者名]